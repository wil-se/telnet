{% extends 'base.html' %}
{% load static %}
{% block title %}<title>TelNet</title>{% endblock %}
{% load filters %}
{% block import %}
<script src="{% static 'global_assets/js/plugins/ui/fullcalendar/core/main.min.js' %}"></script>
<script src="{% static 'global_assets/js/plugins/ui/fullcalendar/daygrid/main.min.js' %}"></script>
<script src="{% static 'global_assets/js/plugins/ui/fullcalendar/timegrid/main.min.js' %}"></script>
<script src="{% static 'global_assets/js/plugins/ui/fullcalendar/list/main.min.js' %}"></script>
<script src="{% static 'global_assets/js/plugins/ui/fullcalendar/interaction/main.min.js' %}"></script>
<script src="{% static 'global_assets/js/plugins/ui/fullcalendar/core/locales-all.min.js' %}"></script>


<script src="{% static 'global_assets/js/plugins/extensions/jquery_ui/widgets.min.js' %}"></script>
<script src="{% static 'global_assets/js/plugins/tables/datatables/datatables.min.js' %}"></script>
<script src="{% static 'global_assets/js/plugins/tables/datatables/extensions/natural_sort.js' %}"></script>
<script src="{% static 'global_assets/js/plugins/forms/selects/select2.min.js' %}"></script>

{% endblock %}

{% block content %}


				<!-- Task manager table -->
				<div class="card">
					<div class="card-header bg-transparent header-elements-inline">
						<h6 class="card-title">Task manager</h6>
					</div>

					<table class="table tasks-list table-lg" style="width: 100%;  ">
						<thead>
							<tr>
								<th>#</th>
								<th>CENTRALE</th>
                <th>WR</th>
                <th>TELEFONO</th>
                <th>NOMINATIVO</th>
                <th>INDIRIZZO</th>
	              <th>ORA APPUNTAMENTO</th>
								<th>SCADENZA</th>
								<th>TIPO PRATICA</th>
								<th>DESCRIZIONE PRATICA</th>
								<th>STATUS</th>
				       </tr>
						</thead>
						<tbody>


                {% for item in tickets %}


                    {% if item|get_class == 'SielteImport' %}
                      {% include 'ticket_dashboard_tecnico_sielte.html' with ticket=item %}
                    {% endif %}

                {% endfor %}

						</tbody>
					</table>
				</div>
				<!-- /task manager table -->


<script>

	var TaskManagerList = function () {



	    var _componentDatatable = function() {
	        if (!$().DataTable) {
	            console.warn('Warning - datatables.min.js is not loaded.');
	            return;
	        }



	        // Initialize data table
	        $('.tasks-list').DataTable({
	            autoWidth: false,
							"scrollX": true,
	            columnDefs: [
	                {
	                    type: "natural",
	                    width: 20,
	                    targets: 0
	                },
	                {
	                    visible: true,
	                    targets: 1
	                },
	                {
	               //     width: '40%',
	                    targets: 2
	                },
	                {
	                    width: '10%',
	                    targets: 3
	                },
	                {
	                    orderDataType: 'dom-text',
	                    type: 'string',
	                    targets: 4
	                },
	                {
	                    orderDataType: 'dom-select',
	                    type: 'string',
	                    targets: 5
	                },
	                {
	                    orderable: false,
	                    width: 100,
	                    targets: 6
	                },
									{
											orderable: false,
	                    orderDataType: 'dom-text',
	                    type: 'string',
	                    targets: 7
	                },
									{
	                    orderDataType: 'dom-text',
	                    type: 'string',
	                    targets: 8
	                },
									{
	                    orderDataType: 'dom-text',
	                    type: 'string',
	                    targets: 9
	                },
									{
											orderDataType: 'dom-text',
											type: 'string',
											targets: 10
									},


	            ],
	            order: [[ 0, 'desc' ]],
	            dom: '<"datatable-header"fl><"datatable-scroll-lg"t><"datatable-footer"ip>',
	            language: {
	                search: '<span>Filtra:</span> _INPUT_',
	                searchPlaceholder: 'Cerca...',
	                lengthMenu: '',
	                paginate: { 'first': 'First', 'last': 'Last', 'next': $('html').attr('dir') == 'rtl' ? '&larr;' : '&rarr;', 'previous': $('html').attr('dir') == 'rtl' ? '&rarr;' : '&larr;' }
	            },
	            lengthMenu: [ 15, 25, 50, 75, 100 ],
	            displayLength: 25,
	            drawCallback: function (settings) {
	                var api = this.api();
	                var rows = api.rows({page:'current'}).nodes();
	                var last=null;

	                // Initialize components
	                _componentUiDatepicker();
	                _componentSelect2();
	            }
	        });
	    };

	    // Datepicker
	    var _componentUiDatepicker = function() {
	        if (!$().datepicker) {
	            console.warn('Warning - jQuery UI components are not loaded.');
	            return;
	        }

	        // Initialize
	        $('.datepicker').datepicker({
	            showOtherMonths: true,
	            dateFormat: 'd MM, y'
	        });
	    };

	    // Select2
	    var _componentSelect2 = function() {
	        if (!$().select2) {
	            console.warn('Warning - select2.min.js is not loaded.');
	            return;
	        }

	        // Initialize
	        $('.form-control-select2').select2({
	            minimumResultsForSearch: Infinity
	        });

	        // Length menu styling
	        $('.dataTables_length select').select2({
	            minimumResultsForSearch: Infinity,
	            dropdownAutoWidth: true,
	            width: 'auto'
	        });
	    };


	    //
	    // Return objects assigned to module
	    //

	    return {
	        init: function() {
	            _componentDatatable();
	            _componentSelect2();
	        }
	    }
	}();


	// Initialize module
	// ------------------------------

	document.addEventListener('DOMContentLoaded', function() {
	    TaskManagerList.init();
	});

</script>



<style>

  @media (max-width: 800px) {

    .content{
      padding: 0px; !important
    }

		.dataTables_filter{
    	margin: 0px; !important
		}
  }
</style>

{% endblock %}
